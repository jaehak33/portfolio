<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>네트워크 · 시스템 보안 포트폴리오</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">

  <style>
    .rotate-180 { transform: rotate(180deg); }
    .transition-transform { transition: transform 0.3s ease; }
  </style>
</head>

<body class="bg-gray-50 text-gray-900">

<div class="max-w-5xl mx-auto px-6 py-24">

  <button onclick="window.history.back()"
    class="mb-6 px-4 py-2 bg-gray-800 text-white rounded-lg shadow hover:bg-gray-700 transition flex items-center gap-2">
    <i class="ri-arrow-left-line"></i> Back
  </button>

  <h2 class="text-3xl font-bold mb-8">네트워크 · 시스템 보안</h2>

  <!-- ================= 모의해킹 ================= -->
  <div class="mb-4 bg-white rounded-xl border shadow">
    <button onclick="toggleSection('sec-overview')" class="w-full p-5 flex justify-between bg-gray-100">
      <span class="text-xl font-bold">모의해킹</span>
      <i id="icon-sec-overview" class="ri-arrow-down-s-line text-2xl transition-transform"></i>
    </button>

    <div id="sec-overview" class="p-6 block">
      <p class="text-gray-700 leading-relaxed mb-6">CTF 풀이입니다.</p>
      <div id="hacking-gallery"
           class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"></div>
    </div>
  </div>

</div>

<!-- ================= 이미지 모달 ================= -->
<div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 hidden flex items-center justify-center z-50">
  <span onclick="closeModal()"
        class="absolute top-5 right-5 text-white text-4xl cursor-pointer">&times;</span>
  <img id="modalImage" class="max-h-[90vh] max-w-full rounded shadow-lg">
</div>

<script>
/* ================= 공통 ================= */
function toggleSection(id) {
  const content = document.getElementById(id);
  const icon = document.getElementById("icon-" + id);
  content.classList.toggle("hidden");
  icon.classList.toggle("rotate-180");
}

function openModal(img) {
  document.getElementById("modalImage").src = img.src;
  document.getElementById("imageModal").classList.remove("hidden");
}

function closeModal() {
  document.getElementById("imageModal").classList.add("hidden");
}

/* ================= 이미지 데이터 ================= */
const hackingImages = [
  { src: "g/a/ip확인.PNG", desc: ".ova파일 다운로드 후 vm으로 올렸을 때의 화면" },
  { src: "g/a/포트스캐닝결과.PNG", desc: "Nmap을 이용한 포트 및 서비스 스캔" },
  { src: "g/a/80포트.PNG", desc: "80포트 확인 결과" },
  { src: "g/a/8080포트확인,소스에이상한점확인.PNG", desc: "8080포트 확인 결과" },
  { src: "g/a/id와패스워드확인.PNG", desc: "mynote.txt 확인 결과" },
  { src: "g/a/디렉토리스캐닝결괴.PNG", desc: "디렉토리 스캐닝 결과" },

  {
    src: [
      "g/a/80포트.PNG",
      "g/a/취약점1.PNG",
      "g/a/취약점2.PNG"
    ],
    desc: "취약점 스캐닝을 통한 공격 대상 분석"
  }
];

/* ================= 갤러리 렌더링 ================= */
function renderGallery(data, targetId) {
  const target = document.getElementById(targetId);

  data.forEach(item => {
    const card = document.createElement("div");
    card.className =
      "bg-gray-50 p-2 h-[260px] flex flex-col rounded border hover:shadow transition";

    let imagesHTML = "";

    // ⭐ 핵심: 문자열 / 배열 자동 처리
    if (Array.isArray(item.src)) {
      item.src.forEach(src => {
        imagesHTML += `
          <img src="${src}"
               class="max-h-[110px] max-w-full cursor-pointer"
               onclick="openModal(this)">
        `;
      });
    } else {
      imagesHTML = `
        <img src="${item.src}"
             class="max-h-full max-w-full cursor-pointer"
             onclick="openModal(this)">
      `;
    }

    card.innerHTML = `
      <div class="flex-1 flex flex-wrap gap-2 items-center justify-center bg-white rounded">
        ${imagesHTML}
      </div>
      <p class="text-sm text-center mt-2">${item.desc}</p>
    `;

    target.appendChild(card);
  });
}

/* ================= 실행 ================= */
renderGallery(hackingImages, "hacking-gallery");
</script>

</body>
</html>
