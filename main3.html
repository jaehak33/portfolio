<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>네트워크 · 시스템 보안 포트폴리오</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">

  <style>
    .rotate-180 { transform: rotate(180deg); }
    .transition-transform { transition: transform 0.3s ease; }

    /* 모달 내 버튼 스타일 */
    .modal-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: white;
      font-size: 3rem;
      cursor: pointer;
      user-select: none;
      background: rgba(0,0,0,0.3);
      padding: 0 0.5rem;
      border-radius: 0.25rem;
      z-index: 1001;
    }
    #modalPrev { left: 1rem; }
    #modalNext { right: 1rem; }

    /* 이미지 모달 */
    #imageModal img {
      max-height: 90vh;
      max-width: 90vw;
      border-radius: 0.5rem;
      box-shadow: 0 0 15px rgba(0,0,0,0.7);
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-900">

<div class="max-w-5xl mx-auto px-6 py-24">

  <!-- Back -->
  <button onclick="window.history.back()"
    class="mb-6 px-4 py-2 bg-gray-800 text-white rounded-lg shadow hover:bg-gray-700 transition flex items-center gap-2">
    <i class="ri-arrow-left-line"></i> Back
  </button>

  <h2 class="text-3xl font-bold mb-8">네트워크 · 시스템 보안</h2>

  <!-- ================= 탭 1 : 모의해킹 ================= -->
  <div class="mb-4 bg-white rounded-xl border shadow">
    <button onclick="toggleSection('sec-overview')" class="w-full p-5 flex justify-between bg-gray-100">
      <span class="text-xl font-bold">모의해킹</span>
      <i id="icon-sec-overview" class="ri-arrow-down-s-line text-2xl transition-transform"></i>
    </button>

    <div id="sec-overview" class="p-6 block">
      <p class="text-gray-700 leading-relaxed mb-6">CTF 풀이입니다.</p>

      <div id="hacking-gallery"
           class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"></div>
    </div>
  </div>

  <!-- ================= 탭 2 : 시스템 보안 ================= -->
  <div class="mb-4 bg-white rounded-xl border shadow">
    <button onclick="toggleSection('sec-system')" class="w-full p-5 flex justify-between bg-gray-100">
      <span class="text-xl font-bold">시스템 보안</span>
      <i id="icon-sec-system" class="ri-arrow-down-s-line text-2xl transition-transform"></i>
    </button>

    <div id="sec-system" class="hidden p-6">
      <div id="system-gallery"
           class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"></div>
    </div>
  </div>

  <!-- ================= 탭 3 : 네트워크 보안 ================= -->
  <div class="mb-4 bg-white rounded-xl border shadow">
    <button onclick="toggleSection('sec-network')" class="w-full p-5 flex justify-between bg-gray-100">
      <span class="text-xl font-bold">네트워크 보안</span>
      <i id="icon-sec-network" class="ri-arrow-down-s-line text-2xl transition-transform"></i>
    </button>

    <div id="sec-network" class="hidden p-6">
      <div id="network-gallery"
           class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"></div>
    </div>
  </div>

</div>

<!-- ================= 이미지 모달 ================= -->
<div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 hidden flex items-center justify-center z-50 relative">
  <span onclick="closeModal()"
        class="absolute top-5 right-5 text-white text-4xl cursor-pointer z-1000">&times;</span>
  
  <span id="modalPrev" class="modal-arrow">&#10094;</span>
  <span id="modalNext" class="modal-arrow">&#10095;</span>

  <img id="modalImage" src="" alt="modal image" />
</div>

<script>
/* ================= 공통 기능 ================= */
function toggleSection(id) {
  const content = document.getElementById(id);
  const icon = document.getElementById("icon-" + id);
  content.classList.toggle("hidden");
  icon.classList.toggle("rotate-180");
}

// 모달 관련 변수
let currentImageIndex = 0;
let currentImageSet = [];

function openModalAtIndex(imageSet, startIndex) {
  currentImageSet = imageSet;
  currentImageIndex = startIndex;
  updateModalImage();
  document.getElementById("imageModal").classList.remove("hidden");
}

function updateModalImage() {
  const modalImage = document.getElementById("modalImage");
  modalImage.src = currentImageSet[currentImageIndex];
}

function closeModal() {
  document.getElementById("imageModal").classList.add("hidden");
}

// 이전 이미지
document.getElementById("modalPrev").addEventListener("click", () => {
  if(currentImageSet.length === 0) return;
  currentImageIndex = (currentImageIndex - 1 + currentImageSet.length) % currentImageSet.length;
  updateModalImage();
});

// 다음 이미지
document.getElementById("modalNext").addEventListener("click", () => {
  if(currentImageSet.length === 0) return;
  currentImageIndex = (currentImageIndex + 1) % currentImageSet.length;
  updateModalImage();
});

// ESC키 닫기
document.addEventListener("keydown", function (e) {
  if (e.key === "Escape") {
    closeModal();
  }
});

/* ================= 이미지 데이터 ================= */

const hackingImages = [
  {
    src: [
      "g/a/ip확인.PNG"
    ],
    desc: ".ova파일 다운로드 후 vm으로 올렸을 때의 화면"
  },
  {
    src: [
      "g/a/포트스캐닝결과.PNG"
    ],
    desc: "Nmap을 이용한 포트 및 서비스 스캔"
  },
  {
    src: [
      "g/a/80포트.PNG"
    ],
    desc: "80포트 확인 결과"
  },
  {
    src: [
      "g/a/8080포트확인,소스에이상한점확인.PNG"
    ],
    desc: "8080포트 확인 결과"
  },
  {
    src: [
      "g/a/id와패스워드확인.PNG"
    ],
    desc: "mynote.txt 확인 결과"
  },
  {
    src: [
      "g/a/디렉토리스캐닝결괴.PNG"
    ],
    desc: "디렉토리 스캐닝 결과"
  },
  {
    src: [
      "g/a/modules.PNG",
      "g/a/plugins.PNG",
      "g/a/bootstrap.PNG",
      "g/a/config.PNG",
      "g/a/themes.PNG",
      "g/a/vendor.PNG",
      "g/a/backend.PNG"
    ],
    desc: "디렉토리 스캐닝 확인"
  }
];

// 시스템 보안, 네트워크 보안 데이터는 그대로 유지 (생략 가능)
const systemImages = [
  { src: ["N,S/Plen.PNG"], desc: "Password 복잡도 설정" },
  { src: ["N,S/pass.PNG"], desc: "PW 만료 기간 설정" },
  { src: ["N,S/wtmpbtmp.PNG"], desc: "wtmp / btmp 로그 확인" },
  { src: ["N,S/setuid.PNG"], desc: "SetUID 권한 상승 실습" },
  { src: ["N,S/BOF.PNG"], desc: "Buffer Overflow 공격 실습" }
];

const networkImages = [
  { src: ["N,S/all.PNG"], desc: "전체 네트워크 토폴로지" },
  { src: ["N,S/snort.PNG"], desc: "Snort 트래픽 탐지" },
  { src: ["N,S/pfsense.PNG"], desc: "pfSense OpenVPN 구성" }
];

/* ================= 갤러리 생성 ================= */
function renderGallery(data, targetId) {
  const target = document.getElementById(targetId);

  data.forEach((item, cardIndex) => {
    const card = document.createElement("div");
    card.className =
      "bg-gray-50 p-2 flex flex-col rounded border hover:shadow transition";

    // 이미지들 작게 한줄로
    let imagesHTML = item.src.map((src, i) => `
      <img src="${src}"
           class="h-20 w-auto cursor-pointer rounded border"
           title="사진 ${i+1} / ${item.src.length}"
           onclick="openModalAtIndex(hackingImages[${cardIndex}].src, 0)">
    `).join("");

    card.innerHTML = `
      <div class="flex flex-wrap justify-center gap-2 bg-white p-2 rounded overflow-hidden">
        ${imagesHTML}
      </div>
      <p class="text-sm text-center mt-2">${item.desc}</p>
    `;

    target.appendChild(card);
  });
}

/* ================= 실행 ================= */
renderGallery(hackingImages, "hacking-gallery");
renderGallery(systemImages, "system-gallery");
renderGallery(networkImages, "network-gallery");
</script>

</body>
</html>
